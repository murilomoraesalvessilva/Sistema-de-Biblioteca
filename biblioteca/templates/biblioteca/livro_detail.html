{% extends 'biblioteca/base.html' %}

{% block title %}{{ livro.titulo }} - Sistema de Biblioteca{% endblock %}

{% block content %}
<div style="margin-bottom: 30px;">
    <a href="{% url 'livro_list' %}" class="btn btn-secondary">‚Üê Voltar para Lista</a>
</div>

<div style="background: var(--card-bg); border-radius: 15px; padding: 40px; box-shadow: 0 10px 30px var(--shadow); animation: fadeIn 0.5s ease;">
    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 30px; flex-wrap: wrap; gap: 20px;">
        <div>
            <h2 style="margin: 0; border: none; padding: 0;">üìñ {{ livro.titulo }}</h2>
            <p style="color: var(--text-secondary); font-size: 18px; margin-top: 10px;">
                <strong>Autor:</strong> 
                <a href="{% url 'autor_detail' livro.autor.pk %}" style="color: #667eea; text-decoration: none; font-weight: 600;">
                    {{ livro.autor.nome }}
                </a>
            </p>
        </div>
        <div class="actions">
            <a href="{% url 'livro_update' livro.pk %}" class="btn btn-primary">‚úèÔ∏è Editar</a>
            <a href="{% url 'livro_delete' livro.pk %}" class="btn btn-danger">üóëÔ∏è Excluir</a>
        </div>
    </div>

    <div style="border-top: 2px solid var(--border-color); padding-top: 30px;">
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px;">
            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px; border-radius: 12px; color: white; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);">
                <div style="font-size: 13px; opacity: 0.9; margin-bottom: 5px;">ISBN</div>
                <div style="font-size: 20px; font-weight: 700;">{{ livro.isbn }}</div>
            </div>

            <div style="background: linear-gradient(135deg, #f6ad55 0%, #ed8936 100%); padding: 20px; border-radius: 12px; color: white; box-shadow: 0 4px 15px rgba(246, 173, 85, 0.3);">
                <div style="font-size: 13px; opacity: 0.9; margin-bottom: 5px;">G√™nero</div>
                <div style="font-size: 20px; font-weight: 700;">{{ livro.get_genero_display }}</div>
            </div>

            <div style="background: linear-gradient(135deg, #48bb78 0%, #38a169 100%); padding: 20px; border-radius: 12px; color: white; box-shadow: 0 4px 15px rgba(72, 187, 120, 0.3);">
                <div style="font-size: 13px; opacity: 0.9; margin-bottom: 5px;">Ano de Publica√ß√£o</div>
                <div style="font-size: 20px; font-weight: 700;">{{ livro.ano_publicacao }}</div>
            </div>

            <div style="background: linear-gradient(135deg, #9f7aea 0%, #805ad5 100%); padding: 20px; border-radius: 12px; color: white; box-shadow: 0 4px 15px rgba(159, 122, 234, 0.3);">
                <div style="font-size: 13px; opacity: 0.9; margin-bottom: 5px;">P√°ginas</div>
                <div style="font-size: 20px; font-weight: 700;">{{ livro.numero_paginas }}</div>
            </div>

            <div style="background: linear-gradient(135deg, #fc8181 0%, #f56565 100%); padding: 20px; border-radius: 12px; color: white; box-shadow: 0 4px 15px rgba(252, 129, 129, 0.3);">
                <div style="font-size: 13px; opacity: 0.9; margin-bottom: 5px;">Editora</div>
                <div style="font-size: 20px; font-weight: 700;">{{ livro.editora }}</div>
            </div>

            <div style="background: linear-gradient(135deg, #4299e1 0%, #3182ce 100%); padding: 20px; border-radius: 12px; color: white; box-shadow: 0 4px 15px rgba(66, 153, 225, 0.3);">
                <div style="font-size: 13px; opacity: 0.9; margin-bottom: 5px;">Cadastrado em</div>
                <div style="font-size: 20px; font-weight: 700;">{{ livro.data_cadastro|date:"d/m/Y" }}</div>
            </div>
        </div>

        {% if livro.sinopse %}
        <div style="margin-top: 30px;">
            <h3 style="color: var(--text-primary); margin-bottom: 15px; font-size: 1.5em;">üìù Sinopse</h3>
            <div style="background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%); padding: 25px; border-radius: 12px; border-left: 4px solid #667eea;">
                <p style="color: var(--text-primary); line-height: 1.8; font-size: 16px; text-align: justify; margin: 0;">
                    {{ livro.sinopse }}
                </p>
            </div>
        </div>
        {% endif %}
    </div>
</div>

<div style="margin-top: 40px;">
    <h3 style="color: var(--text-primary); font-size: 1.8em; margin-bottom: 20px;">üë§ Sobre o Autor</h3>
    
    <div style="background: var(--card-bg); border-radius: 12px; padding: 30px; box-shadow: 0 4px 15px var(--shadow); border: 2px solid var(--border-color);">
        <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 20px;">
            <div>
                <h4 style="color: var(--text-primary); font-size: 1.5em; margin-bottom: 10px;">
                    {{ livro.autor.nome }}
                </h4>
                <p style="color: var(--text-secondary); margin-bottom: 5px;">
                    <strong>Nacionalidade:</strong> {{ livro.autor.nacionalidade }}
                </p>
                <p style="color: var(--text-secondary); margin-bottom: 5px;">
                    <strong>Data de Nascimento:</strong> {{ livro.autor.data_nascimento|date:"d/m/Y" }}
                </p>
                <p style="color: var(--text-secondary);">
                    <strong>Total de Livros:</strong> {{ livro.autor.quantidade_livros }}
                </p>
            </div>
            <div>
                <a href="{% url 'autor_detail' livro.autor.pk %}" class="btn btn-primary">
                    Ver Perfil Completo
                </a>
            </div>
        </div>

        {% if livro.autor.biografia %}
        <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid var(--border-color);">
            <p style="color: var(--text-secondary); line-height: 1.8; font-size: 15px;">
                {{ livro.autor.biografia|truncatewords:50 }}
            </p>
        </div>
        {% endif %}
    </div>
</div>

<div style="margin-top: 40px; text-align: center;">
    <a href="{% url 'livro_list' %}" class="btn btn-secondary">‚Üê Voltar para Lista de Livros</a>
</div>

{% endblock %}